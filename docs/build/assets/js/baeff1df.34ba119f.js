"use strict";(self.webpackChunkpmdaemon_docs=self.webpackChunkpmdaemon_docs||[]).push([[864],{7969:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"api/authentication","title":"API Authentication","description":"PMDaemon provides API key authentication to secure your process management API from unauthorized access.","source":"@site/docs/api/authentication.md","sourceDirName":"api","slug":"/api/authentication","permalink":"/pmdaemon/docs/api/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/entrepeneur4lyf/pmdaemon/tree/main/docs/docs/api/authentication.md","tags":[],"version":"current","frontMatter":{}}');var r=s(4848),t=s(8453);const a={},o="API Authentication",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Enable Authentication",id:"enable-authentication",level:3},{value:"Environment Variable",id:"environment-variable",level:3},{value:"Using Authentication",id:"using-authentication",level:2},{value:"Authentication Headers",id:"authentication-headers",level:3},{value:"1. Bearer Token (Recommended)",id:"1-bearer-token-recommended",level:4},{value:"2. X-API-Key Header",id:"2-x-api-key-header",level:4},{value:"3. ApiKey Authorization",id:"3-apikey-authorization",level:4},{value:"Examples",id:"examples",level:2},{value:"JavaScript/Node.js",id:"javascriptnodejs",level:3},{value:"Python",id:"python",level:3},{value:"cURL Examples",id:"curl-examples",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"401 Unauthorized",id:"401-unauthorized",level:3},{value:"403 Forbidden",id:"403-forbidden",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"API Key Management",id:"api-key-management",level:3},{value:"Network Security",id:"network-security",level:3},{value:"Deployment Recommendations",id:"deployment-recommendations",level:3},{value:"Development",id:"development",level:4},{value:"Staging/Production",id:"stagingproduction",level:4},{value:"Docker",id:"docker",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Connection Refused",id:"connection-refused",level:3},{value:"Authentication Failures",id:"authentication-failures",level:3},{value:"Common Issues",id:"common-issues",level:3},{value:"Migration Guide",id:"migration-guide",level:2},{value:"From Unauthenticated to Authenticated",id:"from-unauthenticated-to-authenticated",level:3},{value:"Example Migration",id:"example-migration",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-authentication",children:"API Authentication"})}),"\n",(0,r.jsx)(n.p,{children:"PMDaemon provides API key authentication to secure your process management API from unauthorized access."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"PMDaemon uses a simple but effective API key authentication system:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optional by default"})," - API runs without authentication if no key is set"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Global API key"})," - Single key protects all API endpoints"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple header formats"})," - Flexible authentication methods"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Public endpoints"})," - Root and WebSocket endpoints remain public"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"enable-authentication",children:"Enable Authentication"}),"\n",(0,r.jsx)(n.p,{children:"Start PMDaemon with an API key to enable authentication:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Start web server with API key authentication\npmdaemon web --api-key "your-secret-api-key"\n\n# Custom host/port with authentication\npmdaemon web --host 0.0.0.0 --port 8080 --api-key "your-secret-key"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"environment-variable",children:"Environment Variable"}),"\n",(0,r.jsx)(n.p,{children:"You can also use an environment variable:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'export PMDAEMON_API_KEY="your-secret-api-key"\npmdaemon web\n'})}),"\n",(0,r.jsx)(n.h2,{id:"using-authentication",children:"Using Authentication"}),"\n",(0,r.jsx)(n.p,{children:"When an API key is configured, all API endpoints require authentication except:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Root endpoint: ",(0,r.jsx)(n.code,{children:"GET /"})]}),"\n",(0,r.jsxs)(n.li,{children:["WebSocket endpoint: ",(0,r.jsx)(n.code,{children:"GET /ws"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authentication-headers",children:"Authentication Headers"}),"\n",(0,r.jsx)(n.p,{children:"PMDaemon accepts three authentication header formats:"}),"\n",(0,r.jsx)(n.h4,{id:"1-bearer-token-recommended",children:"1. Bearer Token (Recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer your-secret-api-key" \\\n     http://localhost:9615/api/processes\n'})}),"\n",(0,r.jsx)(n.h4,{id:"2-x-api-key-header",children:"2. X-API-Key Header"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "X-API-Key: your-secret-api-key" \\\n     http://localhost:9615/api/processes\n'})}),"\n",(0,r.jsx)(n.h4,{id:"3-apikey-authorization",children:"3. ApiKey Authorization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: ApiKey your-secret-api-key" \\\n     http://localhost:9615/api/processes\n'})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"javascriptnodejs",children:"JavaScript/Node.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const API_KEY = 'your-secret-api-key';\nconst BASE_URL = 'http://localhost:9615';\n\n// Using fetch with Bearer token\nconst response = await fetch(`${BASE_URL}/api/processes`, {\n  headers: {\n    'Authorization': `Bearer ${API_KEY}`\n  }\n});\n\n// Using fetch with X-API-Key header\nconst response2 = await fetch(`${BASE_URL}/api/processes`, {\n  headers: {\n    'X-API-Key': API_KEY\n  }\n});\n\nconst processes = await response.json();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import requests\n\nAPI_KEY = 'your-secret-api-key'\nBASE_URL = 'http://localhost:9615'\n\n# Using Authorization header\nheaders = {'Authorization': f'Bearer {API_KEY}'}\nresponse = requests.get(f'{BASE_URL}/api/processes', headers=headers)\n\n# Using X-API-Key header\nheaders = {'X-API-Key': API_KEY}\nresponse = requests.get(f'{BASE_URL}/api/processes', headers=headers)\n\nprocesses = response.json()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"curl-examples",children:"cURL Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# List all processes\ncurl -H "Authorization: Bearer your-api-key" \\\n     http://localhost:9615/api/processes\n\n# Get specific process\ncurl -H "X-API-Key: your-api-key" \\\n     http://localhost:9615/api/processes/my-app\n\n# Stop a process\ncurl -X POST \\\n     -H "Authorization: Bearer your-api-key" \\\n     http://localhost:9615/api/processes/my-app/stop\n\n# Get system information\ncurl -H "X-API-Key: your-api-key" \\\n     http://localhost:9615/api/system\n'})}),"\n",(0,r.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,r.jsx)(n.h3,{id:"401-unauthorized",children:"401 Unauthorized"}),"\n",(0,r.jsxs)(n.p,{children:["When authentication fails, the API returns a ",(0,r.jsx)(n.code,{children:"401 Unauthorized"})," status:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Unauthorized",\n  "message": "Invalid or missing API key"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Common causes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Missing authentication header"}),"\n",(0,r.jsx)(n.li,{children:"Incorrect API key"}),"\n",(0,r.jsx)(n.li,{children:"Wrong header format"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"403-forbidden",children:"403 Forbidden"}),"\n",(0,r.jsx)(n.p,{children:"If authentication succeeds but access is denied:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Forbidden", \n  "message": "Access denied"\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"api-key-management",children:"API Key Management"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use strong keys"}),": Generate random, long API keys"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate a secure API key\nopenssl rand -hex 32\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Keep keys secret"}),": Never expose API keys in:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Client-side code"}),"\n",(0,r.jsx)(n.li,{children:"Version control"}),"\n",(0,r.jsx)(n.li,{children:"Log files"}),"\n",(0,r.jsx)(n.li,{children:"Error messages"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rotate keys regularly"}),": Change API keys periodically"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-security",children:"Network Security"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use HTTPS"}),": Always use HTTPS in production"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Behind reverse proxy with SSL\npmdaemon web --host 127.0.0.1 --api-key "$API_KEY"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Restrict access"}),": Limit network access"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Bind to localhost only\npmdaemon web --host 127.0.0.1 --api-key "$API_KEY"\n\n# Use firewall rules\niptables -A INPUT -p tcp --dport 9615 -s 10.0.0.0/8 -j ACCEPT\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Monitor access"}),": Log and monitor API usage"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deployment-recommendations",children:"Deployment Recommendations"}),"\n",(0,r.jsx)(n.h4,{id:"development",children:"Development"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# No authentication for local development\npmdaemon web --host 127.0.0.1\n"})}),"\n",(0,r.jsx)(n.h4,{id:"stagingproduction",children:"Staging/Production"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Always use authentication\npmdaemon web --host 127.0.0.1 --api-key "$API_KEY"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"docker",children:"Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'ENV PMDAEMON_API_KEY=your-secret-key\nEXPOSE 9615\nCMD ["pmdaemon", "web", "--host", "0.0.0.0"]\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"connection-refused",children:"Connection Refused"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check if server is running\ncurl http://localhost:9615/\n\n# Check logs\npmdaemon web --api-key "key" --verbose\n'})}),"\n",(0,r.jsx)(n.h3,{id:"authentication-failures",children:"Authentication Failures"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Test without authentication (if no key set)\ncurl http://localhost:9615/api/processes\n\n# Test with authentication\ncurl -H "X-API-Key: your-key" http://localhost:9615/api/processes\n\n# Verify key format\necho "API_KEY: $API_KEY"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Missing headers"}),": Ensure authentication header is included"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Wrong endpoint"}),": Authentication not required for ",(0,r.jsx)(n.code,{children:"/"})," and ",(0,r.jsx)(n.code,{children:"/ws"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Key format"}),": Check for extra spaces or special characters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Server configuration"}),": Verify API key was set when starting server"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-guide",children:"Migration Guide"}),"\n",(0,r.jsx)(n.h3,{id:"from-unauthenticated-to-authenticated",children:"From Unauthenticated to Authenticated"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update clients"})," to include authentication headers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Start server"})," with API key"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test endpoints"})," with new authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update monitoring"})," tools and scripts"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-migration",children:"Example Migration"}),"\n",(0,r.jsx)(n.p,{children:"Before:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Server\npmdaemon web\n\n# Client\ncurl http://localhost:9615/api/processes\n"})}),"\n",(0,r.jsx)(n.p,{children:"After:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Server  \npmdaemon web --api-key "secure-key-123"\n\n# Client\ncurl -H "Authorization: Bearer secure-key-123" \\\n     http://localhost:9615/api/processes\n'})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/pmdaemon/docs/api/rest-api",children:"REST API Reference"})})," - Complete API documentation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/pmdaemon/docs/api/websocket-api",children:"WebSocket API"})})," - Real-time updates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/pmdaemon/docs/api/error-handling",children:"Error Handling"})})," - Handle API errors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/pmdaemon/docs/advanced/security",children:"Security Guide"})})," - Advanced security topics"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);